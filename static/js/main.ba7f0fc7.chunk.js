(this.webpackJsonpstay=this.webpackJsonpstay||[]).push([[0],{21:function(e,t,n){e.exports=n(29)},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(10),i=n.n(c),o=(n(26),n(7)),s=n.n(o),l=n(11),u=n(3),f=n(2),d=n(5),h=n(8),v=n(0),y=(n(28),function(){var e,t=new URLSearchParams(window.location.search),n=Object(r.useState)([null!==(e=t.get("file"))&&void 0!==e?e:"stay/survey.svg"]),c=Object(d.a)(n,2),i=c[0],o=c[1],y=Object(r.useState)(),b=Object(d.a)(y,2),p=b[0],m=b[1],x=Object(r.useRef)(null),g=Object(r.useState)(),k=Object(d.a)(g,2),O=k[0],w=k[1],j=Object(r.useRef)([]),E=Object(r.useRef)([]),N=Object(r.useRef)({}),C=Object(r.useRef)(),T=Object(r.useState)(),L=Object(d.a)(T,2),M=L[0],S=L[1],R=Object(r.useRef)(),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.split(t).map((function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)})).join("")},B=function(e){"string"!==typeof e&&(e=[e.x,e.y,e.width,e.height].join(" ")),C.current.setAttribute("viewBox",e)},I=function(e){var t,n={},r=Object(u.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.nodeName]=a.nodeValue}}catch(g){r.e(g)}finally{r.f()}if(n.style){var c,i={},o=Object(u.a)(n.style.split(";"));try{for(o.s();!(c=o.n()).done;){var s=c.value.split(":"),l=Object(d.a)(s,2),f=l[0],h=l[1];i[f=V(f,"-")]=h}}catch(g){o.e(g)}finally{o.f()}n.style=i}n.class&&(n.className=n.class,delete n.class);for(var v=0,y=["xml:space","xlink:href","xmlns:xlink"];v<y.length;v++){var b=y[v];n[b]&&(n[V(b,":")]=n[b],delete n[b])}for(var p=0,m=["flood-opacity","flood-color"];p<m.length;p++){var x=m[p];n[x]&&(n[V(x,"-")]=n[x],delete n[x])}return n},P=function(e){var t=C.current.getScreenCTM().inverse(),n=X(e.x,e.y),r=X(e.x+e.width,e.y+e.height),a=n.matrixTransform(t),c=r.matrixTransform(t);return{x:a.x,y:a.y,width:c.x-a.x,height:c.y-a.y}},Y=function(e,t){return{x:t.x*e.a+t.y*e.c+0,y:t.x*e.b+t.y*e.d+0}},D=function(e){var t=Y(e,{x:0,y:1}),n=Y(e,{x:1,y:0}),r=180/Math.PI*Math.atan2(t.y,t.x)-90,a=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:e.e,translateY:e.f,scaleX:Math.sqrt(e.a*e.a+e.b*e.b),scaleY:Math.sqrt(e.c*e.c+e.d*e.d),skewX:r,skewY:a,rotation:r}},X=function(e,t){var n=C.current.createSVGPoint();return n.x=e,n.y=t,n},q=function(e){e=e.replace(/^#/,"");var t,n=Object(u.a)(j.current);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=Object(f.a)(r.current.childNodes).filter((function(e){return e.attributes&&e.attributes["xlink:href"]}));if(a.map((function(e){return e.attributes["xlink:href"].nodeValue.replace(/^#/,"")})).includes(e)){var c,i=Object(u.a)(a);try{for(i.s();!(c=i.n()).done;){var o=c.value;if(o.classList){var s=o.attributes["xlink:href"].nodeValue.replace(/^#/,""),l=N.current[s]&&N.current[s].current,d=s===e;d?o.classList.add("active"):o.classList.remove("active"),h.a.to(l,.5,{display:d?"inline":"none",opacity:d?1:0,ease:v.b.easeInOut})}}}catch(y){i.e(y)}finally{i.f()}}}}catch(y){n.e(y)}finally{n.f()}},K=function(e,t){if(e!==t){for(;e.parentNode!==t;)e=e.parentNode;Object(f.a)(e.classList).includes("active")||q(e.attributes["xlink:href"].nodeValue)}},W=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!((n=e.sent).status>=200&&n.status<300)){e.next=11;break}return e.t0=m,e.next=7,n.text();case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 11:alert("Couldn't Load: ".concat(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){W(i[0])}),[i]),Object(r.useEffect)((function(){if(p)try{var e,t=(new DOMParser).parseFromString(p,"text/xml");j.current=[],E.current=[],x.current=null===(e=t.documentElement.attributes.viewBox)||void 0===e?void 0:e.nodeValue,N.current={},w(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{val:0};if(t.nodeType===Node.ELEMENT_NODE){var c,i=[],s=Object(u.a)(t.childNodes);try{for(s.s();!(c=s.n()).done;){var l=c.value;if(l.nodeType===Node.ELEMENT_NODE)if(0===l.childNodes.length||Object(f.a)(l.childNodes).find((function(e){return e.nodeType!==Node.TEXT_NODE})))i.push(e(l,n));else{var d=I(l.attributes);d.key=++n.val;var y=Object(f.a)(l.childNodes).map((function(e){return e.data})).join();i.push(a.a.createElement(l.nodeName,d,y))}else l.data&&""!==l.data.trim()&&console.error("Child",l.data)}}catch(w){s.e(w)}finally{s.f()}var b=I(t.attributes);b.key=++n.val;var p="svg"===t.nodeName?C:Object(r.createRef)();b.ref=p,b.id&&(N.current[b.id]=b.ref),["space"].includes(b.className)&&(b.onClick=function(){p.current}),["parent"].includes(b.className)&&(b.onClick=function(){b.ref.current.classList.add("selected"),console.info("RT",b.ref.current.childNodes);var e=new v.d,t=b.ref.current.querySelector(".card");if(t){var n=t.getBoundingClientRect();n=P(n),e.to(C.current,{duration:1,opacity:1,attr:{viewBox:[n.x,n.y,n.width,n.height].join(" ")}});var r=D(t.getScreenCTM()).rotation;e.to(C.current,{duration:1,opacity:1,rotation:-r,transformOrigin:"".concat(n.x+n.width," ").concat(n.y+n.height)});for(var a=0,c=Object(f.a)(t.parentNode.childNodes);a<c.length;a++){var i=c[a];if(i!==t){var s=D(i.getScreenCTM()).rotation;console.info("\u03f4",i,s),e.to(i,{duration:2,rotation:-11.5*s,transformOrigin:"".concat(n.x-4*n.width/2," ").concat(n.y+n.height/2)},"<")}}}e.to(C.current,{duration:1.5,style:{opacity:0},ease:v.b.easeInOut,onComplete:function(){return o((function(e){return[b.xlinkHref].concat(Object(f.a)(e))}))}})}),b.style&&b.style.display,b["inkscape:label"]&&i.unshift(a.a.createElement("title",{key:++n.val},b["inkscape:label"])),"space"===b["inkscape:label"]&&E.current.push(b.ref),["key"].includes(b.className)&&(j.current.push(b.ref),b.onClick=function(e){return K(e.target,b.ref.current)}),["link"].includes(b.className)&&(b.onClick=function(){var e=b.xlinkHref;e.startsWith("#")?q(e):o((function(t){return[e].concat(Object(f.a)(t))}))});var m=b["selected:transform"];if(m){var x=b.onClick;b.onClick=function(e){x&&x(e)}}if(["toggle"].includes(b.className)){var g=function(){b.ref.current.classList.toggle("on");var e,t=Object(u.a)(E.current);try{for(t.s();!(e=t.n()).done;){var n=e.value,r="0"!==n.current.style.opacity;h.a.to(n.current,.5,{display:r?"none":"inline",opacity:r?0:1,ease:v.b.easeInOut})}}catch(w){t.e(w)}finally{t.f()}};window.addEventListener("keypress",(function(e){"s"===e.key&&g()})),b.onClick=g}var k=b.onClick;b.onClick=function(e){k&&k(e);for(var t=e.target;t.parentNode&&!t.attributes["inkscape:label"];)t=t.parentNode;t&&t.attributes?(t.classList.add("clicked"),setTimeout((function(){return t.classList.remove("clicked")}),1e3),S(t.attributes["inkscape:label"].nodeValue),R.current&&clearTimeout(R.current),R.current=setTimeout((function(){return S()}),5e3)):S("")};var O=a.a.createElement(t.nodeName,b,i);return O}console.error("Root Type",t.nodeType)}(t.documentElement))}catch(n){alert("Error Loading: ".concat(i[0])),console.error(n),console.error(p)}}),[p]),Object(r.useEffect)((function(){var e,t=Object(u.a)(j.current);try{for(t.s();!(e=t.n()).done;)for(var n=e.value,r=0,a=Object(f.a)(n.current.childNodes);r<a.length;r++){var c=a[r];if(c.attributes){var i=c.attributes["xlink:href"].nodeValue.replace(/^#/,"");"0"!==N.current[i].current.style.opacity&&q(i)}}}catch(o){t.e(o)}finally{t.f()}}),[O]),Object(r.useEffect)((function(){var e=function(e){var t=function(){var e=C.current.attributes.viewBox.nodeValue.split(/\s+/).map(parseFloat);return{x:e[0],y:e[1],width:e[2],height:e[3]}}(),n=(e.altKey?.025:.1)*(e.deltaY/Math.abs(e.deltaY));if(e.shiftKey)t.x+=t.width*n;else if(e.ctrlKey){e.preventDefault();var r=C.current.createSVGPoint();r.x=e.clientX,r.y=e.clientY;var a=r.matrixTransform(C.current.getScreenCTM().inverse()),c={x:a.x-t.x,y:a.y-t.y},i={width:t.width*(1-n),height:t.height*(1-n)},o={x:i.width*(c.x/t.width),y:i.height*(c.y/t.height)};i.x=a.x-o.x,i.y=a.y-o.y,t=i}else t.y+=t.height*n;B(t)};return window.addEventListener("wheel",e,{passive:!1}),function(){return window.removeEventListener("wheel",e)}}),[]),Object(r.useEffect)((function(){var e=function(e){"Enter"===e.key&&B(x.current)};return window.addEventListener("keypress",e),function(){return window.removeEventListener("keypress",e)}}),[]),a.a.createElement("div",{id:"App"},O,M&&a.a.createElement("h1",null,M),i.length>1&&a.a.createElement("button",{id:"back",onClick:function(){o((function(e){return e.slice(1)}))}},a.a.createElement("span",{role:"img","aria-label":"Close"},"\u274c")))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.ba7f0fc7.chunk.js.map